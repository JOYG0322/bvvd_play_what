<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êàò‰∫âÈõ∑ÈúÜÊ®°ÂºèÊäΩÂèñÂ∑•ÂÖ∑</title>
    <style>
        :root {
            /* ÁôΩÂ§©‰∏ªÈ¢òÂèòÈáè */
            --day-bg-color: #f0f4f8;
            --day-container-bg: #ffffff;
            --day-text-color: #2c3e50;
            --day-primary-color: #3498db;
            --day-secondary-color: #2c3e50;
            --day-border-color: #dbe2e8;
            --day-button-bg: #3498db;
            --day-button-text: #ffffff;
            --day-result-bg: #e8f4fc;
            --day-history-bg: #f8f9fa;
            --day-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --day-mode-bg: #e8f4fc;
            
            /* ÈªëÂ§ú‰∏ªÈ¢òÂèòÈáè */
            --night-bg-color: #1a2a1a;
            --night-container-bg: #213421;
            --night-text-color: #e0e0c0;
            --night-primary-color: #c8b070;
            --night-secondary-color: #e0e0c0;
            --night-border-color: #5a7d5a;
            --night-button-bg: #5a7d5a;
            --night-button-text: #e0e0c0;
            --night-result-bg: #2a3c2a;
            --night-history-bg: #223322;
            --night-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            --night-mode-bg: #2a3c2a;
            
            /* ÂΩìÂâç‰∏ªÈ¢òÂèòÈáèÔºàÈªòËÆ§ÁôΩÂ§©Ôºâ */
            --bg-color: var(--day-bg-color);
            --container-bg: var(--day-container-bg);
            --text-color: var(--day-text-color);
            --primary-color: var(--day-primary-color);
            --secondary-color: var(--day-secondary-color);
            --border-color: var(--day-border-color);
            --button-bg: var(--day-button-bg);
            --button-text: var(--day-button-text);
            --result-bg: var(--day-result-bg);
            --history-bg: var(--day-history-bg);
            --shadow: var(--day-shadow);
            --mode-bg: var(--day-mode-bg);
        }

        body.night-theme {
            --bg-color: var(--night-bg-color);
            --container-bg: var(--night-container-bg);
            --text-color: var(--night-text-color);
            --primary-color: var(--night-primary-color);
            --secondary-color: var(--night-secondary-color);
            --border-color: var(--night-border-color);
            --button-bg: var(--night-button-bg);
            --button-text: var(--night-button-text);
            --result-bg: var(--night-result-bg);
            --history-bg: var(--night-history-bg);
            --shadow: var(--night-shadow);
            --mode-bg: var(--night-mode-bg);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            line-height: 1.6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--container-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .theme-toggle, .lang-select {
            padding: 10px 15px;
            background: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .lang-select {
            background: var(--container-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }
        
        h1 {
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            font-size: 2.2em;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .modes-section, .result-section {
            flex: 1;
            min-width: 300px;
            background: var(--container-bg);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            text-align: center;
            font-size: 1.5em;
        }
        
        .mode-item {
            margin-bottom: 15px;
            padding: 12px 15px;
            background: var(--mode-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .mode-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .mode-item input {
            margin-right: 15px;
            transform: scale(1.3);
            accent-color: var(--primary-color);
        }
        
        .mode-item label {
            font-size: 1.2em;
            color: var(--text-color);
            cursor: pointer;
            flex: 1;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--button-bg);
            color: var(--button-text);
        }
        
        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        #draw-button {
            background: var(--primary-color);
            color: var(--container-bg);
        }
        
        .result-display {
            text-align: center;
            padding: 30px;
            margin: 20px 0;
            background: var(--result-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .result-text {
            font-size: 2.2em;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .result-time {
            color: var(--secondary-color);
            font-size: 1em;
            margin-top: 15px;
        }
        
        .history-section {
            background: var(--container-bg);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: var(--history-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        
        .history-item {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-mode {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .history-time {
            color: var(--secondary-color);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: var(--secondary-color);
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .result-text {
                font-size: 1.6em;
            }
        }
    </style>
</head>
<body class="light-theme">
    <div class="container">
        <header>
            <h1 id="title">Êàò‰∫âÈõ∑ÈúÜÊ®°ÂºèÊäΩÂèñÂ∑•ÂÖ∑</h1>
            <div class="header-controls">
                <button class="theme-toggle" id="theme-toggle">üåô ÈªëÂ§úÊ®°Âºè</button>
                <select class="lang-select" id="lang-select">
                    <option value="zh">‰∏≠Êñá</option>
                    <option value="en">English</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                </select>
            </div>
        </header>
        
        <div class="main-content">
            <div class="modes-section">
                <h2 class="section-title" id="select-title">ÈÄâÊã©Ê®°Âºè</h2>
                <div class="mode-item">
                    <input type="checkbox" id="ground-ab" checked>
                    <label for="ground-ab" id="label-ground-ab">ÈôÜÊàòË°óÊú∫</label>
                </div>
                <div class="mode-item">
                    <input type="checkbox" id="ground-rb" checked>
                    <label for="ground-rb" id="label-ground-rb">ÈôÜÊàòÂéÜÂè≤</label>
                </div>
                <div class="mode-item">
                    <input type="checkbox" id="ground-sb">
                    <label for="ground-sb" id="label-ground-sb">ÈôÜÊàòÂÖ®Áúü</label>
                </div>
                <div class="mode-item">
                    <input type="checkbox" id="air-ab" checked>
                    <label for="air-ab" id="label-air-ab">Á©∫ÊàòË°óÊú∫</label>
                </div>
                <div class="mode-item">
                    <input type="checkbox" id="air-rb" checked>
                    <label for="air-rb" id="label-air-rb">Á©∫ÊàòÂéÜÂè≤</label>
                </div>
                
                <div class="buttons">
                    <button id="select-all">ÂÖ®ÈÄâ</button>
                    <button id="select-none">ÂÖ®‰∏çÈÄâ</button>
                </div>
                <div class="buttons">
                    <button id="draw-button">ÊäΩÂèñÊ®°Âºè</button>
                </div>
            </div>
            
            <div class="result-section">
                <h2 class="section-title" id="result-title">ÊäΩÂèñÁªìÊûú</h2>
                <div class="result-display">
                    <p id="click-to-draw">ÁÇπÂáªÊäΩÂèñÊåâÈíÆÂºÄÂßã</p>
                    <div class="result-text" id="result">-</div>
                    <div class="result-time" id="result-time"></div>
                </div>
            </div>
        </div>
        
        <div class="history-section">
            <h2 class="section-title" id="history-title">ÊäΩÂèñÂéÜÂè≤</h2>
            <div class="history-list" id="history-list">
                <!-- ÂéÜÂè≤ËÆ∞ÂΩïÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
            </div>
        </div>
        
        <footer>
            <p id="footer-text">Êàò‰∫âÈõ∑ÈúÜÊ®°ÂºèÊäΩÂèñÂ∑•ÂÖ∑ | ÈÉ®ÁΩ≤‰∫é Cloudflare Workers | Êï∞ÊçÆÂ≠òÂÇ®Âú®Êú¨Âú∞ÊµèËßàÂô®‰∏≠</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ËØ≠Ë®ÄÈÖçÁΩÆ
            const translations = {
                'zh': {
                    'title': 'Êàò‰∫âÈõ∑ÈúÜÊ®°ÂºèÊäΩÂèñÂ∑•ÂÖ∑',
                    'select-title': 'ÈÄâÊã©Ê®°Âºè',
                    'label-ground-ab': 'ÈôÜÊàòË°óÊú∫',
                    'label-ground-rb': 'ÈôÜÊàòÂéÜÂè≤',
                    'label-ground-sb': 'ÈôÜÊàòÂÖ®Áúü',
                    'label-air-ab': 'Á©∫ÊàòË°óÊú∫',
                    'label-air-rb': 'Á©∫ÊàòÂéÜÂè≤',
                    'select-all': 'ÂÖ®ÈÄâ',
                    'select-none': 'ÂÖ®‰∏çÈÄâ',
                    'draw-button': 'ÊäΩÂèñÊ®°Âºè',
                    'result-title': 'ÊäΩÂèñÁªìÊûú',
                    'click-to-draw': 'ÁÇπÂáªÊäΩÂèñÊåâÈíÆÂºÄÂßã',
                    'history-title': 'ÊäΩÂèñÂéÜÂè≤',
                    'footer-text': 'Êàò‰∫âÈõ∑ÈúÜÊ®°ÂºèÊäΩÂèñÂ∑•ÂÖ∑ | ÈÉ®ÁΩ≤‰∫é Cloudflare Workers | Êï∞ÊçÆÂ≠òÂÇ®Âú®Êú¨Âú∞ÊµèËßàÂô®‰∏≠',
                    'theme-day': '‚òÄÔ∏è',
                    'theme-night': 'üåô',
                    'no-history': 'ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï',
                    'no-selection': 'ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏Ä‰∏™Ê®°Âºè'
                },
                'en': {
                    'title': 'War Thunder Mode Selector',
                    'select-title': 'Select Modes',
                    'label-ground-ab': 'Ground AB',
                    'label-ground-rb': 'Ground RB',
                    'label-ground-sb': 'Ground SB',
                    'label-air-ab': 'Air AB',
                    'label-air-rb': 'Air RB',
                    'select-all': 'Select All',
                    'select-none': 'Select None',
                    'draw-button': 'Draw Mode',
                    'result-title': 'Result',
                    'click-to-draw': 'Click draw button to start',
                    'history-title': 'Draw History',
                    'footer-text': 'War Thunder Mode Selector | Deployed on Cloudflare Workers | Data stored locally',
                    'theme-day': '‚òÄÔ∏è Switch to Day Mode',
                    'theme-night': 'üåô Switch to Night Mode',
                    'no-history': 'No history yet',
                    'no-selection': 'Please select at least one mode'
                },
                'ru': {
                    'title': '–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ War Thunder',
                    'select-title': '–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–æ–≤',
                    'label-ground-ab': '–ù–∞–∑–µ–º–Ω—ã–µ AB',
                    'label-ground-rb': '–ù–∞–∑–µ–º–Ω—ã–µ RB',
                    'label-ground-sb': '–ù–∞–∑–µ–º–Ω—ã–µ SB',
                    'label-air-ab': '–ê–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ AB',
                    'label-air-rb': '–ê–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ RB',
                    'select-all': '–í—ã–±—Ä–∞—Ç—å –≤—Å–µ',
                    'select-none': '–°–Ω—è—Ç—å –≤—Å–µ',
                    'draw-button': '–í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º',
                    'result-title': '–†–µ–∑—É–ª—å—Ç–∞—Ç',
                    'click-to-draw': '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≤—ã–±–æ—Ä–∞',
                    'history-title': '–ò—Å—Ç–æ—Ä–∏—è –≤—ã–±–æ—Ä–æ–≤',
                    'footer-text': '–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ War Thunder | –†–∞–∑–º–µ—â–µ–Ω–æ –Ω–∞ Cloudflare Workers | –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ',
                    'theme-day': '‚òÄÔ∏è –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –¥–Ω–µ–≤–Ω–æ–π —Ä–µ–∂–∏–º',
                    'theme-night': 'üåô –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º',
                    'no-history': '–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞',
                    'no-selection': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–∂–∏–º'
                }
            };
            
            // Ê®°ÂºèÊï∞ÊçÆ
            const modes = {
                'ground-ab': {
                    'zh': 'ÈôÜÊàòË°óÊú∫',
                    'en': 'Ground AB',
                    'ru': '–ù–∞–∑–µ–º–Ω—ã–µ AB'
                },
                'ground-rb': {
                    'zh': 'ÈôÜÊàòÂéÜÂè≤',
                    'en': 'Ground RB',
                    'ru': '–ù–∞–∑–µ–º–Ω—ã–µ RB'
                },
                'ground-sb': {
                    'zh': 'ÈôÜÊàòÂÖ®Áúü',
                    'en': 'Ground SB',
                    'ru': '–ù–∞–∑–µ–º–Ω—ã–µ SB'
                },
                'air-ab': {
                    'zh': 'Á©∫ÊàòË°óÊú∫',
                    'en': 'Air AB',
                    'ru': '–ê–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ AB'
                },
                'air-rb': {
                    'zh': 'Á©∫ÊàòÂéÜÂè≤',
                    'en': 'Air RB',
                    'ru': '–ê–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ RB'
                }
            };
            
            // Ëé∑ÂèñDOMÂÖÉÁ¥†
            const themeToggle = document.getElementById('theme-toggle');
            const langSelect = document.getElementById('lang-select');
            const drawButton = document.getElementById('draw-button');
            const resultElement = document.getElementById('result');
            const resultTimeElement = document.getElementById('result-time');
            const historyListElement = document.getElementById('history-list');
            const selectAllButton = document.getElementById('select-all');
            const selectNoneButton = document.getElementById('select-none');
            
            // ÂàùÂßãÂåñËÆæÁΩÆ
            let currentTheme = localStorage.getItem('theme') || 'light';
            let currentLang = localStorage.getItem('language') || 'zh';
            let drawHistory = JSON.parse(localStorage.getItem('warThunderDrawHistory')) || [];
            
            // Â∫îÁî®‰øùÂ≠òÁöÑËÆæÁΩÆ
            applyTheme(currentTheme);
            applyLanguage(currentLang);
            langSelect.value = currentLang;
            updateHistoryDisplay();
            
            // ‰∏ªÈ¢òÂàáÊç¢‰∫ã‰ª∂
            themeToggle.addEventListener('click', function() {
                currentTheme = currentTheme === 'light' ? 'night' : 'light';
                applyTheme(currentTheme);
                localStorage.setItem('theme', currentTheme);
            });
            
            // ËØ≠Ë®ÄÂàáÊç¢‰∫ã‰ª∂
            langSelect.addEventListener('change', function() {
                currentLang = langSelect.value;
                applyLanguage(currentLang);
                localStorage.setItem('language', currentLang);
                updateHistoryDisplay();
            });
            
            // Â∫îÁî®‰∏ªÈ¢ò
            function applyTheme(theme) {
                if (theme === 'night') {
                    document.body.classList.add('night-theme');
                    themeToggle.textContent = translations[currentLang]['theme-day'];
                } else {
                    document.body.classList.remove('night-theme');
                    themeToggle.textContent = translations[currentLang]['theme-night'];
                }
            }
            
            // Â∫îÁî®ËØ≠Ë®Ä
            function applyLanguage(lang) {
                // Êõ¥Êñ∞ÁïåÈù¢ÊñáÊú¨
                document.getElementById('title').textContent = translations[lang]['title'];
                document.getElementById('select-title').textContent = translations[lang]['select-title'];
                document.getElementById('label-ground-ab').textContent = translations[lang]['label-ground-ab'];
                document.getElementById('label-ground-rb').textContent = translations[lang]['label-ground-rb'];
                document.getElementById('label-ground-sb').textContent = translations[lang]['label-ground-sb'];
                document.getElementById('label-air-ab').textContent = translations[lang]['label-air-ab'];
                document.getElementById('label-air-rb').textContent = translations[lang]['label-air-rb'];
                document.getElementById('select-all').textContent = translations[lang]['select-all'];
                document.getElementById('select-none').textContent = translations[lang]['select-none'];
                document.getElementById('draw-button').textContent = translations[lang]['draw-button'];
                document.getElementById('result-title').textContent = translations[lang]['result-title'];
                document.getElementById('click-to-draw').textContent = translations[lang]['click-to-draw'];
                document.getElementById('history-title').textContent = translations[lang]['history-title'];
                document.getElementById('footer-text').textContent = translations[lang]['footer-text'];
                
                // Êõ¥Êñ∞‰∏ªÈ¢òÊåâÈíÆÊñáÊú¨
                themeToggle.textContent = currentTheme === 'light' ? 
                    translations[lang]['theme-night'] : translations[lang]['theme-day'];
                
                // Êõ¥Êñ∞ÁªìÊûúÂíåÂéÜÂè≤ËÆ∞ÂΩï
                if (resultElement.textContent !== '-' && resultElement.textContent !== translations[lang]['no-selection']) {
                    const currentModeId = findModeIdByText(resultElement.textContent, currentLang);
                    if (currentModeId) {
                        resultElement.textContent = modes[currentModeId][lang];
                    }
                }
            }
            
            // ÈÄöËøáÊñáÊú¨Êü•ÊâæÊ®°ÂºèID
            function findModeIdByText(text, lang) {
                for (const id in modes) {
                    if (modes[id][lang] === text) {
                        return id;
                    }
                }
                return null;
            }
            
            // ÊäΩÂèñÊåâÈíÆ‰∫ã‰ª∂
            drawButton.addEventListener('click', function() {
                // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÊ®°Âºè
                const selectedModes = [];
                for (const id in modes) {
                    const checkbox = document.getElementById(id);
                    if (checkbox.checked) {
                        selectedModes.push(id);
                    }
                }
                
                // Â¶ÇÊûúÊ≤°ÊúâÈÄâÊã©‰ªª‰ΩïÊ®°ÂºèÔºåÊèêÁ§∫Áî®Êà∑
                if (selectedModes.length === 0) {
                    resultElement.textContent = translations[currentLang]['no-selection'];
                    resultTimeElement.textContent = '';
                    return;
                }
                
                // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Ê®°Âºè
                const randomIndex = Math.floor(Math.random() * selectedModes.length);
                const selectedModeId = selectedModes[randomIndex];
                const selectedModeName = modes[selectedModeId][currentLang];
                
                // ÊòæÁ§∫ÁªìÊûú
                resultElement.textContent = selectedModeName;
                
                // ËÆ∞ÂΩïÊó∂Èó¥
                const now = new Date();
                const timeString = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
                resultTimeElement.textContent = translations[currentLang]['result-title'] + ': ' + timeString;
                
                // ‰øùÂ≠òÂà∞ÂéÜÂè≤ËÆ∞ÂΩï
                const historyItem = {
                    mode: selectedModeId,
                    time: timeString,
                    timestamp: now.getTime(),
                    lang: currentLang
                };
                
                drawHistory.unshift(historyItem);
                // Âè™‰øùÁïôÊúÄËøë20Êù°ËÆ∞ÂΩï
                if (drawHistory.length > 20) {
                    drawHistory = drawHistory.slice(0, 20);
                }
                
                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('warThunderDrawHistory', JSON.stringify(drawHistory));
                
                // Êõ¥Êñ∞ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
                updateHistoryDisplay();
            });
            
            // ÂÖ®ÈÄâÊåâÈíÆ‰∫ã‰ª∂
            selectAllButton.addEventListener('click', function() {
                for (const id in modes) {
                    document.getElementById(id).checked = true;
                }
            });
            
            // ÂÖ®‰∏çÈÄâÊåâÈíÆ‰∫ã‰ª∂
            selectNoneButton.addEventListener('click', function() {
                for (const id in modes) {
                    document.getElementById(id).checked = false;
                }
            });
            
            // Êõ¥Êñ∞ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
            function updateHistoryDisplay() {
                historyListElement.innerHTML = '';
                
                if (drawHistory.length === 0) {
                    historyListElement.innerHTML = `<div class="history-item">${translations[currentLang]['no-history']}</div>`;
                    return;
                }
                
                drawHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    const modeName = modes[item.mode] ? modes[item.mode][currentLang] : item.mode;
                    
                    historyItem.innerHTML = `
                        <span class="history-mode">${modeName}</span>
                        <span class="history-time">${item.time}</span>
                    `;
                    historyListElement.appendChild(historyItem);
                });
            }
        });
    </script>
</body>
</html>